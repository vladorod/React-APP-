(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{175:function(e,t,a){e.exports=a(340)},180:function(e,t,a){},340:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"loadData",function(){return C}),a.d(n,"UpdataData",function(){return S}),a.d(n,"addTask",function(){return I}),a.d(n,"editTask",function(){return L}),a.d(n,"setUser",function(){return M});var r=a(1),s=a.n(r),o=a(6),i=a.n(o),c=(a(180),a(94)),l=a(64),u=a(65),d={data:[],task_count:"",login:"",password:"",users:[{username:"admin",password:"123"}]},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.data,r=t.login,s=t.task_count,o=t.form,i=t.id,c=t.status,l=t.text;switch(a){case"CHANGE_DATA":var p=0;return Object(u.a)({},e,{data:n,task_count:s,id:p++});case"CHENGE_LOGIN_FROM_DATA":return Object(u.a)({},e,{login:r});case"ADD_TASK":return e.push(o),Object(u.a)({},e);case"EDIT_DATA":return e.data.forEach(function(e){e.id===i&&(e.status=c,e.text=l)}),Object(u.a)({},e,{id:i,status:c,text:l});default:return Object(u.a)({},e)}},m=a(34),h=a(35),f=a(37),g=a(36),b=a(38),y=a(87),k=a(343),E=a(345),v=a(63),w=a(172),O=k.a.Column,A=E.a.Paragraph,j=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={dir:"",field:"",page:"1"},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"newLoadData",value:function(e){this.setState({page:String(e)}),this.props.loadData(String(e),this.state.dir,this.state.field)}},{key:"onChange",value:function(e,t,a){this.props.editTask(e,t,a)}},{key:"editAdmin",value:function(e,t){var a=this;return"admin"===this.props.user?s.a.createElement(A,{key:t.id,style:{margin:0,width:"100%",border:0,display:"block"},editable:{onChange:function(e){return a.onChange(t.status,e,t.id)}}},e):s.a.createElement("span",{key:t.id},e)}},{key:"editStatus",value:function(e){return 0===e?10:0}},{key:"editAdminCheckbox",value:function(e,t,a){var n=this;return"admin"===this.props.user?s.a.createElement(v.a,{key:a,checked:10===e,onChange:function(){return n.onChange(n.editStatus(e),t,a)}}):s.a.createElement(v.a,{key:a,checked:10===e,disabled:!0})}},{key:"sort",value:function(e){"ascend"===e.order?(this.setState({dir:"asc",field:e.field}),this.props.loadData(this.state.page,"asc",e.field)):"descend"===e.order?(this.setState({dir:"desc",field:e.field}),this.props.loadData(this.state.page,"desc",e.field)):(this.setState({dir:"",field:""}),this.props.loadData(this.state.page,this.state.dir,this.state.field))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(k.a,{onChange:function(t,a,n){return e.sort(n)},pagination:!1,footer:function(){return s.a.createElement(w.a,{onChange:function(t){return e.newLoadData(t)},defaultCurrent:1,total:+e.props.task_count/3*10})},size:"small",currentPageData:"1",dataSource:this.props.data},s.a.createElement(O,{key:"UserName",sorter:!0,title:"User Name",dataIndex:"username"}),s.a.createElement(O,{key:"Email",sorter:!0,title:"Email",dataIndex:"email"}),s.a.createElement(O,{key:"text",sorter:!0,title:"Text",render:this.editAdmin.bind(this),dataIndex:"text"}),s.a.createElement(O,Object(y.a)({key:"status",sorter:!0,title:"Done",dataIndex:"status",render:function(t,a){return e.editAdminCheckbox(a.status,a.text,a.id)}},"key","id"))))}}]),t}(r.Component),T=a(167),D=a.n(T),x="https://uxcandy.com/~shapoval/test-task-backend/",_="&developer=Vlad",C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return function(n){var r;fetch("".concat(x,"?").concat((r=e,"page=".concat(r)),"&").concat("sort_direction","=").concat(t,"&").concat("sort_field","=").concat(a).concat(_)).then(function(e){return e.json()}).then(function(e){n({type:"CHANGE_DATA",data:e.message.tasks,task_count:e.message.total_task_count})})}},S=function(){return function(e){fetch("".concat(x,"?").concat("page=1").concat(_)).then(function(e){return e.json()}).then(function(t){e({type:"CHANGE_DATA",data:t.message.tasks,task_count:t.message.total_task_count})})}},I=function(e){return function(t){fetch("".concat(x,"create?&").concat(_),{method:"post",headers:{"content-type":"application/x-www-form-urlencoded"},body:"email=".concat(e.email,"&text=").concat(e.text,"&username=").concat(e.username)}).then(function(e){return e.json()}).then(function(e){}).catch(function(e){console.log("Request failed",e)})}},L=function(e,t,a){return function(n){var r="status=".concat(e,"&text=").concat(t,"&token=beejee");fetch("".concat(x,"edit/").concat(a).concat(_),{method:"post",headers:{"content-type":"application/x-www-form-urlencoded"},body:"".concat(r,"&signature=").concat(D()(r))}).then(function(e){return e.json()}).then(function(e){}).catch(function(e){console.log("Request failed",e)}),n({type:"EDIT_DATA",id:a,status:e,text:t})}},M=function(e){return function(t){t({type:"CHENGE_LOGIN_FROM_DATA",login:e})}},N=a(341),U=a(342),P=a(23),G=a(346),F=(a(329),a(344)),q=a(347),H=a(9),R=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){e||a.props.users.forEach(function(e){t.username===e.username&&t.password===e.password&&(a.props.setUser(e.username),a.props.showModal())})})},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return s.a.createElement(F.a,{onSubmit:this.handleSubmit,className:"login-form"},s.a.createElement(F.a.Item,null,e("username",{rules:[{required:!0,message:"Please input your username!"}]})(s.a.createElement(q.a,{prefix:s.a.createElement(H.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username"}))),s.a.createElement(F.a.Item,null,e("password",{rules:[{required:!0,message:"Please input your Password!"}]})(s.a.createElement(q.a,{prefix:s.a.createElement(H.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),s.a.createElement(F.a.Item,null,e("remember",{valuePropName:"checked",initialValue:!0})(s.a.createElement(v.a,null,"Remember me")),s.a.createElement("a",{className:"login-form-forgot",href:"#password"},"Forgot password")),s.a.createElement(P.a,{type:"primary",htmlType:"submit"},"Log in"))}}]),t}(s.a.Component),B=F.a.create({name:"normal_login"})(R),K=function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return""===this.props.login?s.a.createElement("span",{style:{margin:"10px"}},s.a.createElement(P.a,{onClick:this.props.action},"LOGIN")):s.a.createElement("span",{style:{margin:"10px",color:"white"}}," ",s.a.createElement("span",{style:{margin:"10px",color:"white"}},"Hi,",this.props.login)," ",s.a.createElement(P.a,{onClick:function(){return e.props.setUser("")},type:"danger"},"EXIT"))}}]),t}(r.Component),V=q.a.TextArea,X=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){e||(a.props.addTask(t),a.props.showModalAddTask(),a.props.form.resetFields(),a.props.loadData("1"))})},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator;return s.a.createElement(F.a,{onSubmit:this.handleSubmit},s.a.createElement(F.a.Item,null,t("username",{rules:[{required:!0,message:"Please input your username!"}]})(s.a.createElement(q.a,{prefix:s.a.createElement(H.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"username",ref:function(t){return e.userinput=t}}))),s.a.createElement(F.a.Item,null,t("email",{rules:[{required:!0,message:"Please input your email!"}]})(s.a.createElement(q.a,{type:"email",style:{marginBottom:"30px"},placeholder:"Email"}))),s.a.createElement(F.a.Item,null,t("text",{rules:[{required:!0,message:"Please input your email!"}]})(s.a.createElement(V,{style:{marginBottom:"30px"},placeholder:"Text"}))),s.a.createElement(F.a.Item,null,s.a.createElement(P.a,{type:"primary",htmlType:"submit"},"Submit")))}}]),t}(r.Component),J=F.a.create({name:"add_task"})(X),z=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={visibleLogin:!1,visibleAddTask:!1},a.showModalLogin=function(){!1===a.state.visibleLogin?a.setState({visibleLogin:!0}):a.setState({visibleLogin:!1})},a.showModalAddTask=function(){!1===a.state.visibleAddTask?a.setState({visibleAddTask:!0}):a.setState({visibleAddTask:!1})},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){this.props.loadData("1")}},{key:"login",value:function(){var e=this,t=this.state.inputLogin,a=this.state.inputLogin;this.state.users.forEach(function(n){n.login===t&&n.password===a&&(e.setState({user:n.login}),e.showModalLogin())})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(N.a,{type:"flex",style:{background:"black",marginBottom:"40px"}},s.a.createElement(U.a,{div:4},s.a.createElement(K,{setUser:this.props.setUser,login:this.props.login,action:this.showModalLogin}),s.a.createElement(P.a,{onClick:this.showModalAddTask,style:{margin:"10px"}},"ADD TASK"))),s.a.createElement(j,{editTask:this.props.editTask,user:this.props.login,data:this.props.data,loadData:this.props.loadData,task_count:this.props.task_count}),s.a.createElement(G.a,{footer:"",title:"LOGIN",visible:this.state.visibleLogin,onCancel:this.showModalLogin},s.a.createElement(B,{users:this.props.users,setUser:this.props.setUser,showModal:this.showModalLogin})),s.a.createElement(G.a,{footer:"",title:"ADD TUSK",visible:this.state.visibleAddTask,onCancel:this.showModalAddTask},s.a.createElement(J,{addTask:this.props.addTask,showModalAddTask:this.showModalAddTask,loadData:this.props.loadData})))}}]),t}(r.Component),W=Object(c.b)(function(e){return e},n)(z),Q=a(171),Y=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.c,Z=Object(l.d)(p,Y(Object(l.a)(Q.a)));i.a.render(s.a.createElement(c.a,{store:Z},s.a.createElement(W,null)),document.getElementById("root"))}},[[175,1,2]]]);
//# sourceMappingURL=main.57992078.chunk.js.map